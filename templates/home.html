{% extends 'base.html' %}
{% block main %}
<div class="max-w-lg mx-auto">
  <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">
    <a href="/1" class="btn">Create chat</a>
    <a href="/2" class="btn">Accept chat</a>
    <button class="btn" onclick="add_chat_modal.showModal()">Add chat</button>
  </div>
  <div class="grid grid-cols-1 gap-2 pt-2">
  {% for name, number in chats %}
  <div class="card card-border shadow-sm">
    <div class="card-body p-4">
      <h2 class="card-title break-all">
        <a href="/3/{{ name }}" class="link link-hover">{{ name }}</a>
      </h2>
      <p class="text-base-content/60">{{ number }} {% if number == 1 %}message{% else %}messages{% endif %}</p>
      <div class="card-actions justify-end">
        <a href="/3/{{ name }}" class="btn">Open chat</a>
      </div>
    </div>
  </div>
  {% endfor %}
  </div>
</div>
<dialog id="add_chat_modal" class="modal">
  <div class="modal-box">
    <form method="post">
      <fieldset class="fieldset">
        <legend class="fieldset-legend">Add chat</legend>
        <div class="label">Interlocutor's configuration</div>
        <textarea name="conf" class="textarea break-all" spellcheck="false" required></textarea>
        <button type="submit" class="btn btn-primary mt-2">Add chat</button>
      </fieldset>
    </form>
  </div>
  <form method="dialog" class="modal-backdrop"><button></button></form>
</dialog>
{% endblock %}